{% extends "base.html" %}

{% block title %}Editar Evento - EventLink{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row">
        <div class="col-md-8 mx-auto">
            <div class="card">
                <div class="card-header" style="background: linear-gradient(135deg, var(--figma-lila) 0%, var(--figma-purple) 100%); color: white;">
                    <h3 class="mb-0">
                        <i class="fas fa-edit"></i> Editar Evento
                    </h3>
                </div>
                <div class="card-body">
                    <form method="POST">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="titulo" class="form-label">Título del Evento</label>
                                    <input type="text" class="form-control" id="titulo" name="titulo" 
                                           value="{{ evento.titulo }}" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="tipo" class="form-label">Tipo de Evento</label>
                                    <select class="form-select" id="tipo" name="tipo" required>
                                        <option value="">Seleccionar tipo...</option>
                                        {% for tipo in tipos_evento %}
                                            <option value="{{ tipo.value }}" 
                                                    {% if evento.tipo == tipo %}selected{% endif %}>
                                                {{ tipo.value.title() }}
                                            </option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="descripcion" class="form-label">Descripción</label>
                            <textarea class="form-control" id="descripcion" name="descripcion" rows="3" required>{{ evento.descripcion }}</textarea>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="fecha_inicio" class="form-label">Fecha y Hora de Inicio</label>
                                    <input type="datetime-local" class="form-control" id="fecha_inicio" name="fecha_inicio" 
                                           value="{{ evento.fecha_inicio.strftime('%Y-%m-%dT%H:%M') if evento.fecha_inicio else '' }}" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="fecha_fin" class="form-label">Fecha y Hora de Fin</label>
                                    <input type="datetime-local" class="form-control" id="fecha_fin" name="fecha_fin" 
                                           value="{{ evento.fecha_fin.strftime('%Y-%m-%dT%H:%M') if evento.fecha_fin else '' }}" required>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="ubicacion" class="form-label">Ubicación</label>
                            <input type="text" class="form-control" id="ubicacion" name="ubicacion" 
                                   value="{{ evento.ubicacion }}" required>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="ciudad" class="form-label">Ciudad</label>
                                    <input type="text" class="form-control" id="ciudad" name="ciudad" 
                                           value="{{ evento.ciudad }}" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="direccion" class="form-label">Dirección</label>
                                    <input type="text" class="form-control" id="direccion" name="direccion" 
                                           value="{{ evento.direccion or '' }}">
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="numero_invitados" class="form-label">Número de Invitados</label>
                                    <input type="number" class="form-control" id="numero_invitados" name="numero_invitados" 
                                           min="1" value="{{ evento.numero_invitados or '' }}">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="presupuesto_maximo" class="form-label">Presupuesto Máximo</label>
                                    <div class="input-group">
                                        <span class="input-group-text">$</span>
                                        <input type="number" class="form-control" id="presupuesto_maximo" 
                                               name="presupuesto_maximo" min="0" step="1000" 
                                               value="{{ evento.presupuesto_maximo or '' }}">
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="requisitos_especiales" class="form-label">Requisitos Especiales</label>
                            <textarea class="form-control" id="requisitos_especiales" name="requisitos_especiales" rows="2">{{ evento.requisitos_especiales or '' }}</textarea>
                        </div>
                        
                        <!-- Información del estado actual -->
                        <div class="alert alert-info">
                            <h6><i class="fas fa-info-circle"></i> Información del Evento</h6>
                            <p class="mb-1"><strong>Estado actual:</strong> 
                                <span class="badge bg-{% if evento.estado.value == 'activo' %}success{% elif evento.estado.value == 'cancelado' %}danger{% else %}warning{% endif %}">
                                    {{ evento.estado.value.title() }}
                                </span>
                            </p>
                            <p class="mb-1"><strong>Fecha de creación:</strong> {{ evento.fecha_creacion.strftime('%d/%m/%Y %H:%M') }}</p>
                            <p class="mb-0"><strong>Última actualización:</strong> {{ evento.fecha_actualizacion.strftime('%d/%m/%Y %H:%M') if evento.fecha_actualizacion else 'Nunca' }}</p>
                        </div>
                        
                        <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                            <a href="{{ url_for('evento.listar_eventos') }}" class="btn-pago-outline me-md-2">
                                <i class="fas fa-arrow-left"></i> Cancelar
                            </a>
                            <a href="{{ url_for('evento.detalle_evento', evento_id=evento.id) }}" class="btn btn-info me-md-2">
                                <i class="fas fa-eye"></i> Ver Detalle
                            </a>
                            <button type="submit" class="btn-pago">
                                <i class="fas fa-save"></i> Guardar Cambios
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
/* Estilos específicos para el formulario de edición */
.card {
    background: linear-gradient(135deg, #ffffff 0%, var(--figma-lila-light) 100%);
    border: 1px solid rgba(142, 68, 173, 0.1);
    box-shadow: 0 4px 20px rgba(0,0,0,0.1);
}

.card-header {
    border-radius: 12px 12px 0 0 !important;
    border-bottom: none;
}

.form-label {
    color: var(--figma-lila);
    font-weight: 600;
}

.form-control:focus,
.form-select:focus {
    border-color: var(--figma-lila);
    box-shadow: 0 0 0 0.2rem rgba(142, 68, 173, 0.25);
}

.alert-info {
    background: linear-gradient(135deg, var(--figma-lila-light) 0%, rgba(142, 68, 173, 0.1) 100%);
    border-left-color: var(--figma-lila);
    border: 1px solid rgba(142, 68, 173, 0.2);
}

.badge {
    font-size: 0.8rem;
    padding: 0.4em 0.8rem;
    border-radius: 20px;
}

.input-group-text {
    background: var(--figma-lila-light);
    border-color: var(--figma-lila);
    color: var(--figma-lila);
    font-weight: 600;
}
</style>
{% endblock %}



